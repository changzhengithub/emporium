<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>nim</title>
  <script src="/static/iconfont/iconfont.js"></script>
</head>

<body>
  <section id="app"></section>
  <script>
    window.kill = function () {
      var btnDom = document.getElementById('back-btn')
      if (btnDom) {
        btnDom.click()
      } else {
        console.log('该页面没有标题栏或者返回按钮没有获取到！')
      }
    }
    window.paySuccess = function (finish) {
      alert(finish)
      if (window.localStorage) {
        alert(1)
        var id = localStorage.getItem('id')
        alert(2)
        var token = localStorage.getItem('token')
        alert(3)
        var OrderNo = localStorage.getItem('OrderNo')
        alert(4)
        var origin = localStorage.getItem('origin5')
        alert(5)
        
        window.id = id
        alert(6)
        window.token = token
        if (finish) {
          alert(7)
          window.payFinish = 'success'
        } else {
          alert(8)
          window.payFinish = 'fail'
        }
        // location.reload()
        // window.vueModule.$store.commit('saveOrderNo', OrderNo)
        // window.vueModule.$router.push({name: origin})
      }
    }
    window.onload = function () {
      var bodyDom = document.documentElement || document.body
      var scrollDom, summaryDom, qualityDom, sampleDom, currentTop, summaryLimit, qualityLimit, summaryBtnDom, qualityBtnDom, sampleBtnDom
      bodyDom.addEventListener('scroll', function (event) {
        var event = event || window.event
        summaryDom = document.getElementById('summary')
        qualityDom = document.getElementById('quality')
        sampleDom = document.getElementById('sample')
        summaryBtnDom = document.getElementById('summary-btn')
        qualityBtnDom = document.getElementById('quality-btn')
        sampleBtnDom = document.getElementById('sample-btn')
        scrollDom = document.getElementById('scroll')
        if (!scrollDom || !summaryDom || !qualityDom || !sampleDom || !summaryBtnDom || !qualityBtnDom || !sampleBtnDom) return
        summaryLimit = qualityDom.offsetTop - summaryDom.offsetTop
        qualityLimit = sampleDom.offsetTop - summaryDom.offsetTop
        currentTop = bodyDom.scrollTop
        if (currentTop < summaryLimit) {
          scrollDom.style.left = summaryBtnDom.offsetLeft + 'px'
        } else if (currentTop < qualityLimit) {
          scrollDom.style.left = qualityBtnDom.offsetLeft + 'px'
        } else {
          scrollDom.style.left = sampleBtnDom.offsetLeft + 'px'
        }
      })
    }

    try {
      alert(appJsInterface.sendTokenToHtml())
      var basicData = appJsInterface.sendTokenToHtml().split('-')
      id = basicData[0]
      token = basicData[1]
    } catch (error) {
      console.log(error)
    }
  </script>
</body>
</html>